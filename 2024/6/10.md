# 取り組んだ内容一覧
- SQL実践入門

# わかったこと
- Hash
  - 動作イメージ
    - まず小さいテーブルをスキャンし、結合キーに対してハッシュ関数を適用することでハッシュ値に変換する（ハッシュテーブルを作る）
    - 次に、もう一方のテーブルをスキャンして、結合キーがそのハッシュ値に存在するかどうかを調べる
  - 小さい方のテーブルからハッシュテーブルを作る理由は、ハッシュテーブルは DBMS のワーキングメモリに保持されるため、なるべく小さい方が効率が良いから。
  - 特徴
    - 結合テーブルからハッシュテーブルを作るために、Nested Loops に比べるとメモリを多く消費する
    - 上記のことから、メモリ内にハッシュテーブルが収まらないとストレージを使用することになり、遅延が発生する
    - 出力となるハッシュ値は入力値の順序性を保存しないため、等値結合でしか使用できない
  - Hash が有効なケース
    - Nested Loops で適切な駆動表（すなわち相対的に十分に小さいテーブル）が存在しない場合
    - 駆動表として小さいテーブルは指定できるが、内部表のヒット件数が多い場合
    - Nested Loops の内部表にインデックスが存在しない場合
    - 一言で言えば、Nested Loops が効率的に動作しない場合の次善策が Hash である。
  - Hash を使うときの基本戦略
    - ユーザの要求にシステムが即座にレスポンスを返すタイプの処理での使用は極力避け、同時併走する処理の少ない夜間バッチ、または BI/DWH のようなスループットの低いシステムに使い所を限定すること。
- Sort Merge
  - 動作イメージ
    - 結合対象のテーブルをそれぞれ結合キーでソートを行い、一致する結合キーを見つけたらそれを結果セットに含める
  - Sort Merge は対象のテーブルをどちらもソートする必要があるため、Nested Loops よりも多くのメモリを消費する。結合そのものにかかる時間は結合の対象行数が多い場合でも悪くないが、テーブルのソートに多くの時間とリソースを要する可能性がある。そのため、テーブルのソートをスキップできるケースでは考慮すべきだが、それ以外の場合は、まず Nested Loops と Hash が優先的な選択肢となる。

# 次やること
- SQL実践入門

# 学習時間
Today: 0 h 30 m

Total: 956 h 40 m
